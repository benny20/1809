"use strict";jQuery(function(d){function e(t){d.ajax({url:"../../api/chongxuancar.php",type:"GET",dataType:"json",success:function(t){!function(t){r.innerHTML=t.map(function(t,n){var a=t.id,e=t.content,c=t.price,i=(t.oldprice,t.size),r=t.qty,s=(t.smallimg,[]),p="";return p=t.smallimg.split("&"),d.each(p,function(t,n){s.push(n.substr(0))}),'<tr class="dianpu">\n                        <td colspan="7">\n                                <input type="checkbox"class="quanxuan"/>\n                                <div><a href="#">宿本官方旗舰店</a></div>\n                            </td>\n                        </tr>\n                        <tr class="tr1" data-guid='+a+'>\n                            <td class="cjw">\n                                <div class="chk">\n                                    <input type="checkbox"class="gouxuan2"/>\n                                </div>\n                            </td>\n                            <td class="cjw2">\n                                <a href="#"><img src='+s[1]+' alt=""/></a>\n                                <div>\n                                    <a href="#">'+e+'</a>\n                                </div>\n                            </td>\n                            <td class="cj">\n                                \x3c!-- <p>颜色：卡其色</p> --\x3e\n                                <p>尺码：'+i+'</p>\n                            </td>\n                            <td class="cjw3">￥'+c+'</td>\n                            <td class="cjw4">\n                                <div class="jiajian">\n                                    <a  href="javascript:void(0);"class="btn_d">-</a>\n                                    <input type="text" class="sla"value='+r+'>\n                                    <a href="javascript:void(0);"class="btn_a">+</a>\n                                </div>\n                            </td>\n                            <td class="cjw5">￥'+r*c+'</td>\n                            <td class="cjw6">\n                            <a href="#"class="shanchu">删除</a>\n                            </td>\n                        </tr>'}).join(""),d(".byxuan").on("click",".btn_a",function(){d(this).prev().val(Math.abs(parseInt(d(this).prev().val()))+1),1!==parseInt(d(this).prev().val())&&d(".btn_d").attr("disabled",!1),d(this).parent().parent().next().children().text(d(this).prev().val()*d(this).parent().parent().prev().html().replace(/\D+/g,"")),a(d(this))}),d(".byxuan").on("click",".btn_d",function(){d(this).next().val(Math.abs(parseInt(d(this).next().val()))-1),parseInt(d(this).next().val())<1&&(d(this).next().val(1),d(".btn_d").attr("disabled",!0)),d(this).parent().parent().next().children().text(d(this).next().val()*d(this).parent().parent().prev().html().replace(/\D+/g,"")),a(d(this))});var n=!0;function a(t){var n=t.parent().find("input").val(),a=t.parent().parent().prev().text();a=(a=d.trim(a)).substring(1);var e=(n*a).toFixed(2);t.parent().parent().next().html("￥&nbsp;"+e),c()}d("#gouxuan").on("click",function(){n?(d(this).find("input").prop("checked","checked"),d(".dianpu input").prop("checked","checked"),d(".tr1 input").prop("checked","checked")):(d(this).find("input").removeAttr("checked"),d(".dianpu input").removeAttr("checked"),d(".tr1 input").removeAttr("checked","checked")),n=!n,c()}),d(".dianpu").on("click",".quanxuan",function(){d(this).prop("checked")?d(this).parent().parent().next().find("input").prop("checked","checked"):d(this).parent().parent().next().find("input").removeAttr("checked"),c()}),d(".byxuan").on("click",".cjw6 .shanchu",function(){var t=confirm("您确定要删除该行吗？");if(t){var n=d(this).closest(".tr1").attr("data-guid");d.ajax({url:"../../api/deldan.php",type:"get",dataType:"json",data:{id:n},success:function(t){e(t),c()}.bind(d(this))})}});var i=[];function c(){i.length=0;for(var t=d(".dianpu input").size(),n=0;n<t;n++)d(".dianpu input").eq(n).prop("checked")&&i.push(n);for(var a=0,e=0,n=0;n<i.length;n++){a+=1*d(".sla").eq(i[n]).val();var c=d(".cjw5").eq(i[n]).text();c=1*(c=d.trim(c)).substring(1),e+=c}d(".choub").text(a),d(".nimab").text("￥"+e)}d(".clearall").on("click",function(){var t=confirm("您确定要删除全部吗？");t&&d.ajax({url:"../../api/removecar.php",type:"get",dataType:"json",data:{removecar:"yes"},success:function(t){t&&(e(t),c())}.bind(d(this))}),d("#gouxuan").find("input").prop("checked","")})}(t)}})}e();var r=document.querySelector(".byxuan")});