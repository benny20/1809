"use strict";window.onload=function(){var n=document.querySelector("#header"),e=document.querySelector(".dingbu"),o=document.querySelector(".denglu"),t=document.querySelector(".down"),c=decodeURI(location.search).slice(1);c&&(o.innerHTML=c,t.onclick=function(){alert("确认要退出吗？"),o.innerHTML="登录"}),o.onclick=function(){location.href="login.html"},window.onscroll=function(){500<=window.scrollY?n.className="xd":window.scrollY<=0&&(n.className=""),700<=window.scrollY?e.style.display="block":window.scrollY<700&&(e.style.display="none")},e.onclick=function(){var e=setInterval(function(){var n=window.scrollY;0<n?(window.scrollTo(0,n-100),console.log(n-20)):clearInterval(e)},30)};var i=document.querySelector(".content");function l(){$.ajax({url:"../../api/list.php",type:"GET",data:{page:1,num:10},dataType:"json",success:function(n){r(n)}})}l();var a=!0;function r(n){i.innerHTML+=n.map(function(n){return"<li  data-id="+n.id+">\n                            <img src="+n.img+' alt="" />\n                            <p>'+n.content+"</p>\n                            <div>\n                                <span><b>￥"+n.price+"</b></span>\n                                <span><del>￥"+n.oldprice+"</del></span>\n                                <span><i></i>4963</span>\n                            </div>\n                        </li>"}).join("")}page=1,document.onscroll=function(){i.offsetHeight<window.innerHeight+window.scrollY&&a&&(a=!1,setTimeout(function(){page++,l(),a=!0},1e3))};var s=document.querySelector("#onep"),u=document.querySelector("#twop");document.querySelector("#btn").onclick=function(){var n=s.value.trim().slice(1),e=u.value.trim().slice(1);$.ajax({url:"../../api/price.php",type:"GET",dataType:"json",data:{oneprice:n,twoprice:e},success:function(n){r(n)}})},i.onclick=function(n){if(console.log(n.target),console.log(666),"img"==n.target.tagName.toLowerCase()){var e=n.target.parentElement.dataset.id;console.log(e);var o=new XMLHttpRequest;o.onreadystatechange=function(){4!=o.readyState||200!=o.status&&304!=o.status||(location.href="details.html?"+e)}}o.open("get","../../api/chaid.php?currentId="+e,!0),o.send(null)}};